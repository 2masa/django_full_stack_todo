### Backend (`api/`)

This focuses on API-specific details: endpoints, auth, and environment.

```markdown
# `api/` (Backend Service)

This directory contains the `todo_api` service, a RESTful API built with **FastAPI** that handles business logic, authentication, and database operations.

## üõ†Ô∏è Tech Stack

- **FastAPI**: Core web framework
- **Pydantic**: Settings management and data models
- **EdgeDB**: Async database client
- **python-jose**: JWT generation and validation
- **bcrypt**: Password hashing
- **Uvicorn**: ASGI server

## üìö API Endpoints

All `/todo` endpoints are protected and require a `Bearer` token.

| Method | Endpoint | Description |
| :--- | :--- | :--- |
| `POST` | `/auth/login` | Authenticate and receive JWT tokens. |
| `GET` | `/` | Welcome endpoint. |
| `POST` | `/todo/` | Create a new todo item. |
| `GET` | `/todo/` | Get all active todos for the user. |
| `PATCH` | `/todo/` | Update an existing todo. |
| `DELETE`| `/todo/` | Delete one or more todos. |

## üîê Authentication

Authentication is handled via JWT.
1.  User logs in at `/auth/login` with email/password.
2.  Server validates, hashes password with `bcrypt`, and generates an `access_token` and `refresh_token`.
3.  The `access_token` is passed as a `Bearer` token in the `Authorization` header for all protected endpoints.
4.  A FastAPI dependency (`EdgedbClientWithGlobals`) decodes the token and injects the `current_user_id` as a global into the EdgeDB client for all queries.

## üîë Environment Variables

This service is configured via `devops/envs/api.env` (generated by the `devops` CLI).

| Variable | Description |
| :--- | :--- |
| `JWT_SECURITY_ALGORITHM` | JWT signing algorithm (e.g., `HS256`) |
| `JWT_TOKEN_TIMEOUT_MINUTES`| Access token lifespan |
| `JWT_REFRESH_TOKEN_TIMEOUT_MINUTES`| Refresh token lifespan |
| `JWT_SECURITY_KEY` | **[SECRET]** Key for signing tokens |
| `GEL_HOST` | EdgeDB service IP (in Docker) |
| `GEL_SERVER_PORT` | EdgeDB service port |
| `GEL_SERVER_USER` | EdgeDB username |
| `GEL_SERVER_PASSWORD` | **[SECRET]** EdgeDB password |
| ... | ... |

## üèÉ Running

This service is not intended to be run standalone. It must be started via the main `devops` CLI.


# From the root /devops/ directory

uv run cli service start-dev
```